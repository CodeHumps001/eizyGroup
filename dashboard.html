<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#1e6fb3" />
    <title>Dashboard ‚Äî eizyGroup</title>
    <link rel="preload" as="style" href="css/styles.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <noscript><link rel="stylesheet" href="css/styles.css" /></noscript>
  </head>
  <body id="app-body">
    <header class="site-header dashboard-header">
      <div class="container header-inner">
        <div class="logo">
          <span class="logo-icon" aria-hidden="true"> üßë‚Äçü§ù‚Äçüßë </span>
          <span class="logo-text">eizyGroup</span>
        </div>
        <div class="header-actions">
          <div class="user-info">
            <div class="user-details">
              <div id="user-name-display" class="user-name"></div>
              <div id="user-joined-display" class="user-joined"></div>
            </div>
          </div>
          <button
            class="btn-icon"
            id="theme-toggle"
            title="Toggle dark mode"
            aria-label="Toggle dark mode"
            aria-pressed="false"
          >
            <span id="theme-icon" aria-hidden="true">üåõ</span>
          </button>
          <button
            id="nav-logout-btn"
            class="btn btn-small"
            onclick="logout();"
            aria-label="Log out of your account"
          >
            Logout
          </button>
        </div>
      </div>
    </header>

    <div class="dashboard-root" id="dashboard-root">
      <aside class="sidebar">
        <div class="sidebar-inner">
          <nav class="sidebar-nav" role="tablist">
            <button
              class="tab-btn active"
              data-tab="overview"
              role="tab"
              aria-selected="true"
              aria-controls="overview"
            >
              Overview
            </button>
            <button
              class="tab-btn"
              data-tab="generator"
              role="tab"
              aria-selected="false"
              aria-controls="generator"
            >
              Generator
            </button>
            <button
              class="tab-btn"
              data-tab="history"
              role="tab"
              aria-selected="false"
              aria-controls="history"
            >
              History
            </button>
            <button
              class="tab-btn"
              data-tab="settings"
              role="tab"
              aria-selected="false"
              aria-controls="settings"
            >
              Settings
            </button>
            <button
              class="tab-btn logout-btn"
              data-tab="logout"
              onclick="logout();"
              aria-label="Log out of your account"
            >
              Logout
            </button>
          </nav>
        </div>
      </aside>

      <main class="dashboard-main">
        <!-- Overview Tab -->
        <section id="overview" class="panel tab-content active">
          <h2>Dashboard Overview</h2>
          <div id="overview-content" class="overview-content">
            <div class="welcome">
              Start generating groups to see your analytics and statistics here.
            </div>
          </div>
        </section>

        <!-- Generator Tab -->
        <section id="generator" class="panel tab-content">
          <h2>Group Generator</h2>
          <div class="grid">
            <div class="card input-card">
              <label for="students-input">Student Names (one per line)</label>
              <textarea
                id="students-input"
                placeholder="Alice\nBob\nCharlie\n..."
                rows="10"
                aria-label="Enter student names, one per line"
              ></textarea>
              <div style="margin-top: 12px; width: 150px; border-radius: 100px">
                <label for="csv-import" class="btn btn-small btn-ghost"
                  >üì• Import CSV</label
                >
                <input
                  type="file"
                  id="csv-import"
                  accept=".csv"
                  aria-label="Import student names from CSV file"
                  style="display: none"
                />
              </div>
            </div>

            <div class="card config-card">
              <label for="num-groups">Number of groups</label>
              <input
                type="number"
                id="num-groups"
                min="1"
                value="3"
                aria-label="Set number of groups"
              />
              <label>‚Äî or ‚Äî</label>
              <label for="students-per-group">Students per group</label>
              <input
                type="number"
                id="students-per-group"
                min="1"
                placeholder="Auto"
                aria-label="Set students per group (leave blank for auto)"
              />
              <div class="actions">
                <button
                  class="btn btn-primary"
                  id="generate-btn"
                  aria-label="Click to generate balanced groups"
                >
                  Generate Groups
                </button>
              </div>
            </div>
          </div>

          <div class="results" id="results">
            <div class="welcome">
              Welcome! Paste student names and click "Generate Groups" to begin.
            </div>
          </div>

          <!-- Export button (shown when groups are generated) -->
          <div
            id="export-section"
            class="export-section"
            style="display: none; margin-top: 20px"
            role="region"
            aria-live="polite"
            aria-label="Export options"
          >
            <button
              class="btn btn-primary"
              id="export-csv-btn"
              aria-label="Export groups as CSV file"
            >
              üì• Export as CSV
            </button>
          </div>
        </section>

        <!-- History Tab -->
        <section id="history" class="panel tab-content">
          <h2>Generation History</h2>
          <div id="history-list" class="history-list">
            <div class="welcome">
              No generations yet. Create groups in the Generator tab to see them
              here.
            </div>
          </div>
        </section>

        <!-- Settings Tab -->
        <section id="settings" class="panel tab-content">
          <h2>Settings</h2>
          <div class="settings-container">
            <div class="card settings-card">
              <h3>Account Information</h3>
              <div class="settings-item">
                <label class="settings-label">Name:</label>
                <span id="settings-name" class="settings-value"></span>
              </div>
              <div class="settings-item">
                <label class="settings-label">Email:</label>
                <span id="settings-email" class="settings-value"></span>
              </div>
              <div class="settings-item">
                <label class="settings-label">Member Since:</label>
                <span id="settings-joined" class="settings-value"></span>
              </div>
            </div>

            <div class="card settings-card">
              <h3>Preferences</h3>
              <div class="settings-item">
                <label class="settings-label">
                  <input
                    type="checkbox"
                    id="dark-mode-pref"
                    aria-label="Enable dark mode preference"
                  />
                  Enable Dark Mode
                </label>
              </div>
              <div class="settings-item">
                <label class="settings-label">
                  <input
                    type="checkbox"
                    id="auto-save-pref"
                    checked
                    aria-label="Auto-save group generations to history"
                  />
                  Auto-save group generations to history
                </label>
              </div>
            </div>

            <div class="card settings-card danger-zone">
              <h3>Data Management</h3>
              <div class="settings-item">
                <button
                  class="btn btn-ghost"
                  id="clear-history-btn"
                  aria-label="Clear all saved group generations"
                >
                  Clear History
                </button>
                <p
                  style="
                    font-size: 0.85rem;
                    color: var(--muted);
                    margin: 8px 0 0;
                  "
                >
                  This will delete all saved group generations.
                </p>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Login Modal (shared) -->
    <div
      class="modal"
      id="login-modal"
      aria-hidden="true"
      role="dialog"
      aria-labelledby="modal-title"
      aria-modal="true"
    >
      <div class="modal-backdrop" id="modal-backdrop" aria-hidden="true"></div>
      <div
        class="modal-panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-title"
      >
        <button
          class="modal-close"
          id="modal-close"
          aria-label="Close sign in dialog"
        >
          √ó
        </button>
        <h3 id="modal-title">Sign In</h3>
        <form id="login-form">
          <label class="field">
            <span>Email</span>
            <input type="email" id="login-email" required />
          </label>
          <label class="field">
            <span>Password</span>
            <input type="password" id="login-password" required />
          </label>
          <div class="modal-actions">
            <button class="btn btn-primary" type="submit">Sign In</button>
            <button class="btn btn-ghost" type="button" id="modal-cancel">
              Cancel
            </button>
          </div>
        </form>
        <div class="modal-footer">
          Don't have an account?
          <a href="#" id="switch-to-signup">Sign up</a>
        </div>
      </div>
    </div>

    <!-- Signup Modal (hidden by default) -->
    <div
      class="modal"
      id="signup-modal"
      aria-hidden="true"
      role="dialog"
      aria-labelledby="signup-title"
      aria-modal="true"
    >
      <div
        class="modal-backdrop"
        id="modal-backdrop-signup"
        aria-hidden="true"
      ></div>
      <div
        class="modal-panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="signup-title"
      >
        <button
          class="modal-close"
          id="modal-close-signup"
          aria-label="Close create account dialog"
        >
          √ó
        </button>
        <h3 id="signup-title">Create Account</h3>
        <form id="signup-form">
          <label class="field">
            <span>Full Name</span>
            <input type="text" id="signup-name" required />
          </label>
          <label class="field">
            <span>Email</span>
            <input type="email" id="signup-email" required />
          </label>
          <label class="field">
            <span>Password</span>
            <input type="password" id="signup-password" required />
          </label>
          <label class="field">
            <span>Confirm Password</span>
            <input type="password" id="signup-confirm" required />
          </label>
          <div class="modal-actions">
            <button class="btn btn-primary" type="submit">
              Create Account
            </button>
            <button
              class="btn btn-ghost"
              type="button"
              id="modal-cancel-signup"
            >
              Cancel
            </button>
          </div>
        </form>
        <div class="modal-footer">
          Already have an account?
          <a href="#" id="switch-to-login">Sign in</a>
        </div>
      </div>
    </div>

    <script defer src="js/app.js"></script>
  </body>
</html>
